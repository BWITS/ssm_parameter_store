- name: Create or update key/value pair in aws parameter store
  ssm_parameter_store:
    name: "Hello"
    description: "This is your first key"
    value: "World"

- name: Delete the key
  ssm_parameter_store:
    name: "Hello"
    state: absent

- name: Delete non-exist key
  ssm_parameter_store:
    name: "notkey"
    state: absent

- name: Create or update secure key/value pair in nominated region
  ssm_parameter_store:
    name: "Hello"
    description: "This is your first key"
    region: us-east-1
    string_type: "SecureString"
    value: "World at us-east-1" 

- name: Create or update secure key/value pair with nominated kms key
  ssm_parameter_store:
    name: "Hello"
    description: "This is your first key"
    key_id: "alias/demo"
    string_type: "SecureString"
    value: "World"

- name: Delete key/value pair in nominated region
  ssm_parameter_store:
    name: "Hello"
    region: us-east-1
    state: absent

- name: lookup ssm parameter store in current region
  debug: msg="{{ lookup('ssm', 'Hello' ) }}"

- name: lookup a key which is not exist
  debug: msg="{{ lookup('ssm', 'NoKey') }}"

- name: lookup a key with key/value pair
  debug: msg="{{ lookup('ssm', 'key=Hello' ) }}"

- name: lookup ssm paramter store in nominated region
  debug: msg="{{ lookup('ssm', 'key=Hello region=us-east-2' ) }}"

- name: lookup ssm paramter store in nominated region, key doesn't exist
  debug: msg="{{ lookup('ssm', 'key=Hello region=us-east-1' ) }}"

- name: lookup ssm paramter store in nominated region
  debug: msg="{{ lookup('ssm', 'key=Hello region=ap-southeast-2' ) }}"
